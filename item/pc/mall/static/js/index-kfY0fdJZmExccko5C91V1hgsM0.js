function item_masonry(){$(".item img").load(function(){$("#container").masonry({itemSelector:".item",columnWidth:273})});$("#container").masonry({itemSelector:".item",columnWidth:273})}(function(n,t){"use strict";var i=t.event,r,u;i.special.smartresize={setup:function(){t(this).bind("resize",i.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",i.special.smartresize.handler)},handler:function(n,t){var u=this,f=arguments;n.type="smartresize";r&&clearTimeout(r);r=setTimeout(function(){i.dispatch.apply(u,f)},t==="execAsap"?0:100)}};t.fn.smartresize=function(n){return n?this.bind("smartresize",n):this.trigger("smartresize",["execAsap"])};t.Mason=function(n,i){this.element=t(i);this._create(n);this._init()};t.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}};t.Mason.prototype={_filterFindBricks:function(n){var t=this.options.itemSelector;return t?n.filter(t).add(n.find(t)):n},_getBricks:function(n){return this._filterFindBricks(n).css({position:"absolute"}).addClass("masonry-brick")},_create:function(i){var r,u,f,e,o,s;this.options=t.extend(!0,{},t.Mason.settings,i);this.styleQueue=[];r=this.element[0].style;this.originalStyle={height:r.height||""};u=this.options.containerStyle;for(f in u)this.originalStyle[f]=r[f]||"";this.element.css(u);this.horizontalDirection=this.options.isRTL?"right":"left";e=this.element.css("padding-"+this.horizontalDirection);o=this.element.css("padding-top");this.offset={x:e?parseInt(e,10):0,y:o?parseInt(o,10):0};this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";s=this;setTimeout(function(){s.element.addClass("masonry")},0);this.options.isResizable&&t(n).bind("smartresize.masonry",function(){s.resize()});this.reloadItems()},_init:function(n){this._getColumns();this._reLayout(n)},option:function(n){t.isPlainObject(n)&&(this.options=t.extend(!0,this.options,n))},layout:function(n,t){for(var u,f,o,s,e,i=0,r=n.length;i<r;i++)this._placeBrick(n[i]);if(u={},u.height=Math.max.apply(Math,this.colYs),this.options.isFitWidth){for(f=0,i=this.cols;--i;){if(this.colYs[i]!==0)break;f++}u.width=(this.cols-f)*this.columnWidth-this.options.gutterWidth}for(this.styleQueue.push({$el:this.element,style:u}),o=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",s=this.options.animationOptions,i=0,r=this.styleQueue.length;i<r;i++)e=this.styleQueue[i],e.$el[o](e.style,s);this.styleQueue=[];t&&t.call(n);this.isLaidOut=!0},_getColumns:function(){var t=this.options.isFitWidth?this.element.parent():this.element,n=t.width();this.columnWidth=this.isFluid?this.options.columnWidth(n):this.options.columnWidth||this.$bricks.outerWidth(!0)||n;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((n+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(n){var s=t(n),r,l,u,a,f,e,o,i,h,c,v,y;if(r=Math.ceil(s.outerWidth(!0)/this.columnWidth),r=Math.min(r,this.cols),r===1)u=this.colYs;else for(l=this.cols+1-r,u=[],f=0;f<l;f++)a=this.colYs.slice(f,f+r),u[f]=Math.max.apply(Math,a);for(e=Math.min.apply(Math,u),o=0,i=0,h=u.length;i<h;i++)if(u[i]===e){o=i;break}for(c={top:e+this.offset.y},c[this.horizontalDirection]=this.columnWidth*o+this.offset.x,this.styleQueue.push({$el:s,style:c}),v=e+s.outerHeight(!0),y=this.cols+1-h,i=0;i<y;i++)this.colYs[o+i]=v},resize:function(){var n=this.cols;this._getColumns();(this.isFluid||this.cols!==n)&&this._reLayout()},_reLayout:function(n){var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.layout(this.$bricks,n)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(n){this.reloadItems();this._init(n)},appended:function(n,t,i){if(t){this._filterFindBricks(n).css({top:this.element.height()});var r=this;setTimeout(function(){r._appended(n,i)},1)}else this._appended(n,i)},_appended:function(n,t){var i=this._getBricks(n);this.$bricks=this.$bricks.add(i);this.layout(i,t)},remove:function(n){this.$bricks=this.$bricks.not(n);n.remove()},destroy:function(){var r,i;this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});r=this.element[0].style;for(i in this.originalStyle)r[i]=this.originalStyle[i];this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");t(n).unbind(".masonry")}};t.fn.imagesLoaded=function(n){function u(){n.call(i,r)}function f(n){var i=n.target;i.src!==o&&t.inArray(i,s)===-1&&(s.push(i),--e<=0&&(setTimeout(u),r.unbind(".imagesLoaded",f)))}var i=this,r=i.find("img").add(i.filter("img")),e=r.length,o="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",s=[];return e||u(),r.bind("load.imagesLoaded error.imagesLoaded",f).each(function(){var n=this.src;this.src=o;this.src=n}),i};u=function(t){n.console&&n.console.error(t)};t.fn.masonry=function(n){if(typeof n=="string"){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var r=t.data(this,"masonry");if(!r){u("cannot call methods on masonry prior to initialization; attempted to call method '"+n+"'");return}if(!t.isFunction(r[n])||n.charAt(0)==="_"){u("no such method '"+n+"' for masonry instance");return}r[n].apply(r,i)})}else this.each(function(){var i=t.data(this,"masonry");i?(i.option(n||{}),i._init()):t.data(this,"masonry",new t.Mason(n,this))});return this}})(window,jQuery),function(n,t,i){t.infinitescroll=function(n,i,r){this.element=t(r);this._create(n,i)};t.infinitescroll.defaults={loading:{finished:i,finishedMsg:"<em>Congratulations, you've reached the end of the internet.<\/em>",img:"/content/images/loading.gif",msg:null,msgText:"<em>载入下一组数据...<\/em>",selector:null,speed:"fast",start:i},state:{isDuringAjax:!1,isInvalidPage:!1,isDestroyed:!1,isDone:!1,isPaused:!1,currPage:1},callback:i,debug:!1,behavior:i,binder:t(n),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:!1,pathParse:i,dataType:"html",appendCallback:!0,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:i,path:i};t.infinitescroll.prototype={_binding:function(n){var t=this,r=t.options;if(!!r.behavior&&this["_binding_"+r.behavior]!==i){this["_binding_"+r.behavior].call(this);return}if(n!=="bind"&&n!=="unbind")return this._debug("Binding value  "+n+" not valid"),!1;n=="unbind"?this.options.binder.unbind("smartscroll.infscr."+t.options.infid):this.options.binder[n]("smartscroll.infscr."+t.options.infid,function(){t.scroll()});this._debug("Binding",n)},_create:function(n,r){if(!this._validate(n))return!1;var u=this.options=t.extend(!0,{},t.infinitescroll.defaults,n),f=t(u.nextSelector).attr("href");if(u.contentSelector=u.contentSelector||this.element,u.loading.selector=u.loading.selector||u.contentSelector,!f){this._debug("Navigation selector not found");return}u.path=this._determinepath(f);u.loading.msg=t('<div id="infscr-loading"><img alt="Loading..." src="'+u.loading.img+'" /><div>'+u.loading.msgText+"<\/div><\/div>");(new Image).src=u.loading.img;u.pixelsFromNavToBottom=t(document).height()-t(u.navSelector).offset().top;u.loading.start=u.loading.start||function(){t(u.navSelector).hide();u.loading.msg.appendTo(u.loading.selector).show(u.loading.speed,function(){beginAjax(u)})};u.loading.finished=u.loading.finished||function(){u.loading.msg.fadeOut("normal")};u.callback=function(n,f){!u.behavior||n["_callback_"+u.behavior]===i||n["_callback_"+u.behavior].call(t(u.contentSelector)[0],f);r&&r.call(t(u.contentSelector)[0],f)};this._setup()},_debug:function(){if(this.options.debug)return n.console&&console.log.call(console,arguments)},_determinepath:function(n){var t=this.options;if(!t.behavior||this["_determinepath_"+t.behavior]===i){if(!t.pathParse){if(n.match(/^(.*?)\b2\b(.*?$)/))n=n.match(/^(.*?)\b2\b(.*?$)/).slice(1);else if(n.match(/^(.*?)2(.*?$)/)){if(n.match(/^(.*?page=)2(\/.*|$)/))return n=n.match(/^(.*?page=)2(\/.*|$)/).slice(1),n;n=n.match(/^(.*?)2(.*?$)/).slice(1)}else{if(n.match(/^(.*?page=)1(\/.*|$)/))return n=n.match(/^(.*?page=)1(\/.*|$)/).slice(1),n;this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");t.state.isInvalidPage=!0}return this._debug("determinePath",n),n}return this._debug("pathParse manual"),t.pathParse}this["_determinepath_"+t.behavior].call(this,n);return},_error:function(n){var t=this.options;if(!!t.behavior&&this["_error_"+t.behavior]!==i){this["_error_"+t.behavior].call(this,n);return}n!=="destroy"&&n!=="end"&&(n="unknown");this._debug("Error",n);n=="end"&&this._showdonemsg();t.state.isDone=!0;t.state.currPage=1;t.state.isPaused=!1;this._binding("unbind")},_loadcallback:function(r,u){var f=this.options,h=this.options.callback,c=f.state.isDone?"done":f.appendCallback?"append":"no-append",e,o,s;if(!!f.behavior&&this["_loadcallback_"+f.behavior]!==i){this["_loadcallback_"+f.behavior].call(this,r,u);return}switch(c){case"done":return this._showdonemsg(),!1;case"no-append":f.dataType=="html"&&(u="<div>"+u+"<\/div>",u=t(u).find(f.itemSelector));break;case"append":if(o=r.children(),o.length==0)return this._error("end");for(e=document.createDocumentFragment();r[0].firstChild;)e.appendChild(r[0].firstChild);this._debug("contentSelector",t(f.contentSelector)[0]);t(f.contentSelector)[0].appendChild(e);u=o.get()}f.loading.finished.call(t(f.contentSelector)[0],f);f.animate&&(s=t(n).scrollTop()+t("#infscr-loading").height()+f.extraScrollPx+"px",t("html,body").animate({scrollTop:s},800,function(){f.state.isDuringAjax=!1}));f.animate||(f.state.isDuringAjax=!1);h(this,u)},_nearbottom:function(){var r=this.options,u=0+t(document).height()-r.binder.scrollTop()-t(n).height();if(!r.behavior||this["_nearbottom_"+r.behavior]===i)return this._debug("math:",u,r.pixelsFromNavToBottom),u-r.bufferPx<r.pixelsFromNavToBottom;this["_nearbottom_"+r.behavior].call(this);return},_pausing:function(n){var t=this.options;if(!t.behavior||this["_pausing_"+t.behavior]===i){n!=="pause"&&n!=="resume"&&n!==null&&this._debug("Invalid argument. Toggling pause value instead");n=!n||n!="pause"&&n!="resume"?"toggle":n;switch(n){case"pause":t.state.isPaused=!0;break;case"resume":t.state.isPaused=!1;break;case"toggle":t.state.isPaused=!t.state.isPaused}return this._debug("Paused",t.state.isPaused),!1}this["_pausing_"+t.behavior].call(this,n);return},_setup:function(){var n=this.options;if(!n.behavior||this["_setup_"+n.behavior]===i)return this._binding("bind"),!1;this["_setup_"+n.behavior].call(this);return},_showdonemsg:function(){var n=this.options;if(!!n.behavior&&this["_showdonemsg_"+n.behavior]!==i){this["_showdonemsg_"+n.behavior].call(this);return}n.loading.msg.find("img").hide().parent().find("div").html(n.loading.finishedMsg).animate({opacity:1},2e3,function(){t(this).parent().fadeOut("normal")});n.errorCallback.call(t(n.contentSelector)[0],"done")},_validate:function(n){for(var i in n)return i.indexOf&&i.indexOf("Selector")>-1&&t(n[i]).length===0?(this._debug("Your "+i+" found no elements."),!1):!0},bind:function(){this._binding("bind")},destroy:function(){return this.options.state.isDestroyed=!0,this._error("destroy")},pause:function(){this._pausing("pause")},resume:function(){this._pausing("resume")},retrieve:function(n){var u=this,r=u.options,s=r.path,f,o,e,h,n=n||null,c=n?n:r.state.currPage;if(beginAjax=function(n){n.state.currPage++;u._debug("heading into ajax",s);f=t(n.contentSelector).is("table")?t("<tbody/>"):t("<div/>");o=s.join(n.state.currPage);e=n.dataType=="html"||n.dataType=="json"?n.dataType:"html+callback";n.appendCallback&&n.dataType=="html"&&(e+="+callback");switch(e){case"html+callback":u._debug("Using HTML via .load() method");f.load(o+" "+n.itemSelector,null,function(n){u._loadcallback(f,n)});break;case"html":case"json":u._debug("Using "+e.toUpperCase()+" via $.ajax() method");t.ajax({url:o,dataType:n.dataType,complete:function(n,t){h=typeof n.isResolved!="undefined"?n.isResolved():t==="success"||t==="notmodified";h?u._loadcallback(f,n.responseText):u._error("end")}})}},!!r.behavior&&this["retrieve_"+r.behavior]!==i){this["retrieve_"+r.behavior].call(this,n);return}if(r.state.isDestroyed)return this._debug("Instance is destroyed"),!1;r.state.isDuringAjax=!0;r.loading.start.call(t(r.contentSelector)[0],r)},scroll:function(){var t=this.options,n=t.state;if(!!t.behavior&&this["scroll_"+t.behavior]!==i){this["scroll_"+t.behavior].call(this);return}n.isDuringAjax||n.isInvalidPage||n.isDone||n.isDestroyed||n.isPaused||this._nearbottom()&&this.retrieve()},toggle:function(){this._pausing()},unbind:function(){this._binding("unbind")},update:function(n){t.isPlainObject(n)&&(this.options=t.extend(!0,this.options,n))}};t.fn.infinitescroll=function(n,i){var u=typeof n,r;switch(u){case"string":r=Array.prototype.slice.call(arguments,1);this.each(function(){var i=t.data(this,"infinitescroll");if(!i||!t.isFunction(i[n])||n.charAt(0)==="_")return!1;i[n].apply(i,r)});break;case"object":this.each(function(){var r=t.data(this,"infinitescroll");r?r.update(n):t.data(this,"infinitescroll",new t.infinitescroll(n,i,this))})}return this};var r=t.event,u;r.special.smartscroll={setup:function(){t(this).bind("scroll",r.special.smartscroll.handler)},teardown:function(){t(this).unbind("scroll",r.special.smartscroll.handler)},handler:function(n,i){var r=this,f=arguments;n.type="smartscroll";u&&clearTimeout(u);u=setTimeout(function(){t.event.handle.apply(r,f)},i==="execAsap"?0:100)}};t.fn.smartscroll=function(n){return n?this.bind("smartscroll",n):this.trigger("smartscroll",["execAsap"])}}(window,jQuery);$(document).ready(function(){function n(){item_masonry()}n();$(".item").fadeIn();$("#waterfall").infinitescroll({navSelector:".pagemain",nextSelector:"a.next",itemSelector:".item",loading:{img:"/content/images/loading.gif",msgText:"加载中 ",finishedMsg:"没有了",selector:".wmore",finished:function(){$(".wmore").hide()}},errorCallback:function(){$(".wmore").show()}},function(t){var i=$(t);$("#container").masonry("appended",i,!1);i.fadeIn();n();return})}),function(){$.fn.BreakingNews=function(n){var n=$.extend({background:"#FFF",title:"NEWS",titlecolor:"#FFF",titlebgcolor:"#5aa628",linkcolor:"#5aa628",linkhovercolor:"#5aa628",fonttextsize:16,isbold:!1,border:"none",width:"100%",autoplay:!0,timer:3e3,modulid:"brekingnews",effect:"fade"},n);return this.each(function(){function r(i){i=="next"?$(n.modulid+" ul li").length>t?t++:t=1:t=t-2==-1?$(n.modulid+" ul li").length:t-1;n.effect=="fade"?($(n.modulid+" ul li").css({display:"none"}),$(n.modulid+" ul li").eq(parseInt(t-1)).fadeIn()):$(n.modulid+" ul").animate({marginTop:-($(n.modulid+" ul li").height()+20)*(t-1)})}n.modulid="#"+$(this).attr("id");var i=n.modulid,t=1;fontw=n.isbold==!0?"bold":"normal";n.effect=="slide"?$(n.modulid+" ul li").css({display:"block"}):$(n.modulid+" ul li").css({display:"none"});$(n.modulid+" .bn-title").html(n.title);$(n.modulid).css({width:n.width,background:n.background,border:n.border,"font-size":n.fonttextsize});$(n.modulid+" ul").css({left:$(n.modulid+" .bn-title").width()+40});$(n.modulid+" ul li a").css({color:n.linkcolor,"font-weight":fontw,height:parseInt(n.fonttextsize)+6});$(n.modulid+" ul li").eq(parseInt(t-1)).css({display:"block"});$(n.modulid+" ul li a").hover(function(){$(this).css({color:n.linkhovercolor})},function(){$(this).css({color:n.linkcolor})});$(n.modulid+" .bn-arrows span").click(function(){$(this).attr("class")=="bn-arrows-left"?r("prev"):r("next")});n.autoplay==!0?(i=setInterval(function(){r("next")},n.timer),$(n.modulid).hover(function(){clearInterval(i)},function(){i=setInterval(function(){r("next")},n.timer)})):clearInterval(i);$(window).resize(function(){$(n.modulid).width()<360?($(n.modulid+" .bn-title").html("&nbsp;"),$(n.modulid+" .bn-title").css({width:"4px",padding:"10px 0px"}),$(n.modulid+" ul").css({left:4})):($(n.modulid+" .bn-title").html(n.title),$(n.modulid+" .bn-title").css({width:"auto",padding:"10px 20px"}),$(n.modulid+" ul").css({left:$(n.modulid+" .bn-title").width()+40}))})})}}(jQuery)